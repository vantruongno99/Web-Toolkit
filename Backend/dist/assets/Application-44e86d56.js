import{E as T,F as P,j as e,L as y,C,h as E,r as V}from"./index-6b556b87.js";import{u as A}from"./useQuery-d20b0ea0.js";import{u as $}from"./useMutation-17f212aa.js";import{T as f,D as b,G as s,M as z,S as v,a as O}from"./application.service-3a4285aa.js";import{v as S}from"./vendor.service-64df021e.js";import{b as w}from"./use-form-fe48e6a4.js";import{T as t}from"./Table-962be2c5.js";import{T as N}from"./Title-be952a78.js";import{T as I}from"./TextInput-e19d1547.js";import{T as d}from"./Text-b1f6d07e.js";import{B as R}from"./Button-89a80ae3.js";import"./utils-73056672.js";import"./config-3ad541f8.js";import"./ScrollArea-8e8f695f.js";const Y=()=>{const x=T().id,[n]=P(),p=n.get("type"),a=Number(n.get("id")),j={type:p,...a&&{id:a}};if(!x)return e.jsx("div",{children:"404"});const m=parseInt(x),{isLoading:u,error:g,isError:h,data:c}=A({queryKey:["application",m],queryFn:async()=>{try{const i=await O.getApplication(m);if(!i)throw new Error;return i}catch(i){console.log(i)}}});return u?e.jsx(y,{}):c?e.jsx(e.Fragment,{children:e.jsx(C,{mt:"1rem",children:e.jsx(B,{application:c,isLoading:u,option:j})})}):e.jsx(e.Fragment,{children:"404"})},B=({application:l,isLoading:x,option:n})=>{var h,c,i;const p=E(),a=w({initialValues:{potentialApplications:"",explanation:"",maturity:"",stageOfParticipation:"",purposeOfEngagement:[],levelOfEngagement:"",scale:"",budget:"",solutionFor:"",considerations:""}});V.useEffect(()=>{const r={...l,purposeOfEngagement:l.purposeOfEngagement.split(", ").map(o=>o==""?"":o[0].toUpperCase()+o.slice(1))};a.setValues(r)},[l]);const j=n.id!==void 0&&n.type==="vendor",m=(h=l.Vendor)==null?void 0:h.find(r=>r.Vendor.id===n.id);let u=n.type=="vendor"?(c=l.Vendor)==null?void 0:c.filter(r=>r.Vendor.id===n.id).map((r,o)=>e.jsxs(t.Tr,{children:[e.jsx(t.Td,{children:r.Vendor.name}),e.jsx(t.Td,{children:r.Vendor.ABN}),e.jsx(t.Td,{children:r.approved===!0?"APPROVED":"PENDING"})]},o)):(i=l.Vendor)==null?void 0:i.map((r,o)=>e.jsxs(t.Tr,{onClick:()=>p(`/vendor/${r.Vendor.id}?type=user`),children:[e.jsx(t.Td,{children:r.Vendor.name}),e.jsx(t.Td,{children:r.Vendor.ABN}),e.jsx(t.Td,{children:r.approved===!0?"APPROVED":"PENDING"})]},o));const g=$({mutationFn:async r=>await S.ApplicationRequest(r.applicationId,r.vendorId),onSuccess:()=>{p(`/vendor/${n.id}`)},onError:r=>{console.log(r)}});return e.jsxs("div",{children:[e.jsx(N,{children:e.jsx(I,{size:"30",fz:"sm",...a.getInputProps("potentialApplications")})}),e.jsx(f,{autosize:!0,minRows:3,mt:"1rem",fz:"sm",...a.getInputProps("explanation")}),e.jsx(I,{mt:"1rem",fz:"sm",...a.getInputProps("maturity")}),e.jsx(b,{mt:"1rem",size:"xs",color:"black"}),e.jsxs(s,{justify:"flex-start",align:"center",mt:"1rem",children:[e.jsx(s.Col,{span:3,children:e.jsx(d,{fz:"sm",children:"Stage of participation :"})}),e.jsx(s.Col,{span:9,children:e.jsx(f,{...a.getInputProps("stageOfParticipation"),autosize:!0,minRows:1})})]}),e.jsxs(s,{justify:"flex-start",align:"center",mt:"1rem",children:[e.jsx(s.Col,{span:3,children:e.jsx(d,{fz:"sm",children:"Purpose :"})}),e.jsx(s.Col,{span:9,children:e.jsx(z,{...a.getInputProps("purposeOfEngagement"),data:[{value:"Collaborate",label:"Collaborate"},{value:"Inform",label:"Inform"},{value:"Involve",label:"Involve"},{value:"Consult",label:"Consult"},{value:"Empower",label:"Empower"}]})})]}),e.jsxs(s,{justify:"flex-start",align:"center",mt:"1rem",children:[e.jsx(s.Col,{span:3,children:e.jsx(d,{fz:"sm",children:"Level :"})}),e.jsx(s.Col,{span:3,children:e.jsx(v,{...a.getInputProps("levelOfEngagement"),data:[{value:"Active",label:"Active"},{value:"Passive",label:"Passive"},{value:"Immersive",label:"Immersive"}]})})]}),e.jsxs(s,{justify:"flex-start",align:"center",mt:"1rem",children:[e.jsx(s.Col,{span:3,children:e.jsx(d,{fz:"sm",children:"Scale :"})}),e.jsx(s.Col,{span:3,children:e.jsx(v,{...a.getInputProps("scale"),data:[{value:"Individual",label:"Individual"},{value:"Small group",label:"Small group"},{value:"Large group",label:"Large group"},{value:"Public",label:"Public"}]})})]}),e.jsxs(s,{justify:"flex-start",align:"center",mt:"1rem",children:[e.jsx(s.Col,{span:3,children:e.jsx(d,{fz:"sm",children:"Budget :"})}),e.jsx(s.Col,{span:3,children:e.jsx(v,{...a.getInputProps("budget"),data:[{value:"$",label:"$"},{value:"$$",label:"$$"},{value:"$$$",label:"$$$"}]})})]}),e.jsx(b,{mt:"1rem",size:"xs",color:"black"}),e.jsx(d,{children:"Vendor partipation"}),e.jsxs(t,{mt:"1rem",highlightOnHover:!0,withTableBorder:!0,children:[e.jsx(t.Thead,{children:e.jsxs(t.Tr,{children:[e.jsx(t.Th,{children:"Name"}),e.jsx(t.Th,{children:"ABN"}),e.jsx(t.Th,{children:"approval"})]})}),e.jsx(t.Tbody,{children:u})]}),j&&e.jsx("div",{children:!m&&e.jsx(R,{mt:"1rem",onClick:()=>g.mutateAsync({applicationId:l.id,vendorId:n.id}),children:"Request to particiapte"})})]})};export{Y as default};
